p8105_hw2_zy2378.Rmd
================
zy
10/7/2021

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──

    ## ✓ ggplot2 3.3.3     ✓ purrr   0.3.4
    ## ✓ tibble  3.1.1     ✓ dplyr   1.0.7
    ## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
    ## ✓ readr   2.0.1     ✓ forcats 0.5.1

    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

``` r
library(lubridate)
```

    ## 
    ## Attaching package: 'lubridate'

    ## The following objects are masked from 'package:base':
    ## 
    ##     date, intersect, setdiff, union

``` r
trashwheel_df=
  readxl::read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",sheet=1,range="A2:N535")%>%
  janitor::clean_names()%>%
  drop_na()%>%
  mutate(sports_balls=round(sports_balls))

precipitation_2019=
  readxl::read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",sheet=6,range="A2:B14")%>%
  drop_na()%>%
  mutate(year=2019)
precipitation_2019
```

    ## # A tibble: 12 x 3
    ##    Month Total  year
    ##    <dbl> <dbl> <dbl>
    ##  1     1  3.1   2019
    ##  2     2  3.64  2019
    ##  3     3  4.47  2019
    ##  4     4  1.46  2019
    ##  5     5  3.58  2019
    ##  6     6  0.42  2019
    ##  7     7  3.85  2019
    ##  8     8  2.39  2019
    ##  9     9  0.16  2019
    ## 10    10  5.45  2019
    ## 11    11  1.86  2019
    ## 12    12  3.57  2019

``` r
precipitation_2018=
  readxl::read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",sheet=7,range="A2:B14")%>%
  drop_na()%>%
  mutate(year=2018)
precipitation_2018
```

    ## # A tibble: 12 x 3
    ##    Month Total  year
    ##    <dbl> <dbl> <dbl>
    ##  1     1  0.94  2018
    ##  2     2  4.8   2018
    ##  3     3  2.69  2018
    ##  4     4  4.69  2018
    ##  5     5  9.27  2018
    ##  6     6  4.77  2018
    ##  7     7 10.2   2018
    ##  8     8  6.45  2018
    ##  9     9 10.5   2018
    ## 10    10  2.12  2018
    ## 11    11  7.82  2018
    ## 12    12  6.11  2018

``` r
precipitation_data = 
  inner_join(precipitation_2018, precipitation_2019,by="Month")%>%
  mutate(Month=month.name)

precipitation_data
```

    ## # A tibble: 12 x 5
    ##    Month     Total.x year.x Total.y year.y
    ##    <chr>       <dbl>  <dbl>   <dbl>  <dbl>
    ##  1 January      0.94   2018    3.1    2019
    ##  2 February     4.8    2018    3.64   2019
    ##  3 March        2.69   2018    4.47   2019
    ##  4 April        4.69   2018    1.46   2019
    ##  5 May          9.27   2018    3.58   2019
    ##  6 June         4.77   2018    0.42   2019
    ##  7 July        10.2    2018    3.85   2019
    ##  8 August       6.45   2018    2.39   2019
    ##  9 September   10.5    2018    0.16   2019
    ## 10 October      2.12   2018    5.45   2019
    ## 11 November     7.82   2018    1.86   2019
    ## 12 December     6.11   2018    3.57   2019

``` r
pols_month=
  readr::read_csv("./data/fivethirtyeight_datasets/pols-month.csv")%>%
  separate(mon,into=c("year","month","day"))%>%
  mutate(month=c(rep(month.name,68),"January","February","March","April","May","June"))%>%
  pivot_longer(c(prez_gop,prez_dem),names_to="president",names_prefix = "prez_")%>%
  filter(value>=1)%>%
  mutate(year=as.numeric(year))%>%
  select(-day,-value)
```

    ## Rows: 822 Columns: 9

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_month
```

    ## # A tibble: 822 x 9
    ##     year month     gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##    <dbl> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ##  1  1947 January        23      51     253      23      45     198 dem      
    ##  2  1947 February       23      51     253      23      45     198 dem      
    ##  3  1947 March          23      51     253      23      45     198 dem      
    ##  4  1947 April          23      51     253      23      45     198 dem      
    ##  5  1947 May            23      51     253      23      45     198 dem      
    ##  6  1947 June           23      51     253      23      45     198 dem      
    ##  7  1947 July           23      51     253      23      45     198 dem      
    ##  8  1947 August         23      51     253      23      45     198 dem      
    ##  9  1947 September      23      51     253      23      45     198 dem      
    ## 10  1947 October        23      51     253      23      45     198 dem      
    ## # … with 812 more rows

``` r
snp_df=
  readr::read_csv("./data/fivethirtyeight_datasets/snp.csv")%>%
  mutate(date=mdy(date))%>%
  separate(date,into=c("year","month","day"),convert = TRUE)%>%
  mutate(year=ifelse(2049<year,year-100,year))%>%
  arrange(year,month)%>%
  mutate(month=c(rep(month.name,65),"January","February","March","April","May","June","July"))%>%
  mutate(year=as.numeric(year))%>%
  select(-day)
```

    ## Rows: 787 Columns: 2

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df
```

    ## # A tibble: 787 x 3
    ##     year month     close
    ##    <dbl> <chr>     <dbl>
    ##  1  1950 January    17.0
    ##  2  1950 February   17.2
    ##  3  1950 March      17.3
    ##  4  1950 April      18.0
    ##  5  1950 May        18.8
    ##  6  1950 June       17.7
    ##  7  1950 July       17.8
    ##  8  1950 August     18.4
    ##  9  1950 September  19.5
    ## 10  1950 October    19.5
    ## # … with 777 more rows

``` r
unemployment_df=
  read_csv("./data/fivethirtyeight_datasets/unemployment.csv")%>%
  pivot_longer(Jan:Dec,names_to="month",values_to="unemployment")%>%
  drop_na()%>%
  mutate(month=c(rep(month.name,67),"January","February","March","April","May","June"))%>%
  rename(year=Year)
```

    ## Rows: 68 Columns: 13

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_df
```

    ## # A tibble: 810 x 3
    ##     year month     unemployment
    ##    <dbl> <chr>            <dbl>
    ##  1  1948 January            3.4
    ##  2  1948 February           3.8
    ##  3  1948 March              4  
    ##  4  1948 April              3.9
    ##  5  1948 May                3.5
    ##  6  1948 June               3.6
    ##  7  1948 July               3.6
    ##  8  1948 August             3.9
    ##  9  1948 September          3.8
    ## 10  1948 October            3.7
    ## # … with 800 more rows

``` r
fivethirtyeight1_df=inner_join(pols_month,snp_df)
```

    ## Joining, by = c("year", "month")

``` r
fivethirtyeight_df=inner_join(fivethirtyeight1_df,unemployment_df)
```

    ## Joining, by = c("year", "month")

``` r
fivethirtyeight_df
```

    ## # A tibble: 786 x 11
    ##     year month   gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
    ##    <dbl> <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <dbl>
    ##  1  1950 January      18      44     177      29      57     269 dem        17.0
    ##  2  1950 Februa…      18      44     177      29      57     269 dem        17.2
    ##  3  1950 March        18      44     177      29      57     269 dem        17.3
    ##  4  1950 April        18      44     177      29      57     269 dem        18.0
    ##  5  1950 May          18      44     177      29      57     269 dem        18.8
    ##  6  1950 June         18      44     177      29      57     269 dem        17.7
    ##  7  1950 July         18      44     177      29      57     269 dem        17.8
    ##  8  1950 August       18      44     177      29      57     269 dem        18.4
    ##  9  1950 Septem…      18      44     177      29      57     269 dem        19.5
    ## 10  1950 October      18      44     177      29      57     269 dem        19.5
    ## # … with 776 more rows, and 1 more variable: unemployment <dbl>
